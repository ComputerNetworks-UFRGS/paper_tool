/*

 FullCalendar v1.5.4
 http://arshaw.com/fullcalendar/

 */
(function(e,t){function n(t){e.extend(!0,gt,t)}function r(n,r,f){function l(e){tt?(T(),x(),_(),b(e)):c()}function c(){nt=r.theme?"ui":"fc",n.addClass("fc"),r.isRTL&&n.addClass("fc-rtl"),r.theme&&n.addClass("ui-widget"),tt=e("<div class='fc-content' style='position:relative'/>").prependTo(n),Z=new i(K,r),(et=Z.render())&&n.prepend(et),y(r.defaultView),e(window).resize(C),g()||p()}function p(){setTimeout(function(){!rt.start&&g()&&b()},0)}function d(){e(window).unbind("resize",C),Z.destroy(),tt.remove(),n.removeClass("fc fc-rtl ui-widget")}function v(){return Y.offsetWidth!==0}function g(){return e("body")[0].offsetWidth!==0}function y(t){if(!rt||t!=rt.name){ft++,P();var n=rt,r;n?((n.beforeHide||q)(),I(tt,tt.height()),n.element.hide()):I(tt,1),tt.css("overflow","hidden"),(rt=it[t])?rt.element.show():rt=it[t]=new wt[t](r=ut=e("<div class='fc-view fc-view-"+t+"' style='position:absolute'/>").appendTo(tt),K),n&&Z.deactivateButton(n.name),Z.activateButton(t),b(),tt.css("overflow",""),n&&I(tt,1),r||(rt.afterShow||q)(),ft--}}function b(e){if(v()){ft++,P(),ot===t&&T();var r=!1;!rt.start||e||lt<rt.start||lt>=rt.end?(rt.render(lt,e||0),N(!0),r=!0):rt.sizeDirty?(rt.clearEvents(),N(),r=!0):rt.eventsDirty&&(rt.clearEvents(),r=!0),rt.sizeDirty=!1,rt.eventsDirty=!1,k(r),st=n.outerWidth(),Z.updateTitle(rt.title),e=new Date,e>=rt.start&&e<rt.end?Z.disableButton("today"):Z.enableButton("today"),ft--,rt.trigger("viewDisplay",Y)}}function S(){x(),v()&&(T(),N(),P(),rt.clearEvents(),rt.renderEvents(ct),rt.sizeDirty=!1)}function x(){e.each(it,function(e,t){t.sizeDirty=!0})}function T(){ot=r.contentHeight?r.contentHeight:r.height?r.height-(et?et.height():0)-H(tt):Math.round(tt.width()/Math.max(r.aspectRatio,.5))}function N(e){ft++,rt.setHeight(ot,e),ut&&(ut.css("position","relative"),ut=null),rt.setWidth(tt.width(),e),ft--}function C(){if(!ft)if(rt.start){var e=++at;setTimeout(function(){e==at&&!ft&&v()&&st!=(st=n.outerWidth())&&(ft++,S(),rt.trigger("windowResize",Y),ft--)},200)}else p()}function k(e){!r.lazyFetching||Q(rt.visStart,rt.visEnd)?L():e&&M()}function L(){G(rt.visStart,rt.visEnd)}function A(e){ct=e,M()}function O(e){M(e)}function M(e){_(),v()&&(rt.clearEvents(),rt.renderEvents(ct,e),rt.eventsDirty=!1)}function _(){e.each(it,function(e,t){t.eventsDirty=!0})}function D(e,n,r){rt.select(e,n,r===t?!0:r)}function P(){rt&&rt.unselect()}function B(){b(-1)}function j(){b(1)}function F(){o(lt,-1),b()}function R(){o(lt,1),b()}function U(){lt=new Date,b()}function z(e,t,n){e instanceof Date?lt=h(e):m(lt,e,t,n),b()}function W(e,n,r){e!==t&&o(lt,e),n!==t&&u(lt,n),r!==t&&a(lt,r),b()}function X(){return h(lt)}function V(){return rt}function $(e,n){if(n===t)return r[e];if(e=="height"||e=="contentHeight"||e=="aspectRatio")r[e]=n,S()}function J(e,t){if(r[e])return r[e].apply(t||Y,Array.prototype.slice.call(arguments,2))}var K=this;K.options=r,K.render=l,K.destroy=d,K.refetchEvents=L,K.reportEvents=A,K.reportEventChange=O,K.rerenderEvents=M,K.changeView=y,K.select=D,K.unselect=P,K.prev=B,K.next=j,K.prevYear=F,K.nextYear=R,K.today=U,K.gotoDate=z,K.incrementDate=W,K.formatDate=function(e,t){return w(e,t,r)},K.formatDates=function(e,t,n){return E(e,t,n,r)},K.getDate=X,K.getView=V,K.option=$,K.trigger=J,s.call(K,r,f);var Q=K.isFetchNeeded,G=K.fetchEvents,Y=n[0],Z,et,tt,nt,rt,it={},st,ot,ut,at=0,ft=0,lt=new Date,ct=[],ht;m(lt,r.year,r.month,r.date),r.droppable&&e(document).bind("dragstart",function(t,n){var i=t.target,s=e(i);if(!s.parents(".fc").length){var o=r.dropAccept;if(e.isFunction(o)?o.call(i,s):s.is(o))ht=i,rt.dragStart(ht,t,n)}}).bind("dragstop",function(e,t){ht&&(rt.dragStop(ht,e,t),ht=null)})}function i(t,n){function r(){p=n.theme?"ui":"fc";if(n.header)return h=e("<table class='fc-header' style='width:100%'/>").append(e("<tr/>").append(s("left")).append(s("center")).append(s("right")))}function i(){h.remove()}function s(r){var i=e("<td class='fc-header-"+r+"'/>");return(r=n.header[r])&&e.each(r.split(" "),function(r){r>0&&i.append("<span class='fc-header-space'/>");var s;e.each(this.split(","),function(r,o){if(o=="title")i.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),s&&s.addClass(p+"-corner-right"),s=null;else{var u;t[o]?u=t[o]:wt[o]&&(u=function(){f.removeClass(p+"-state-hover"),t.changeView(o)});if(u){r=n.theme?W(n.buttonIcons,o):null;var a=W(n.buttonText,o),f=e("<span class='fc-button fc-button-"+o+" "+p+"-state-default'><span class='fc-button-inner'><span class='fc-button-content'>"+(r?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+r+"'/></span>":a)+"</span><span class='fc-button-effect'><span></span></span></span></span>");f&&(f.click(function(){f.hasClass(p+"-state-disabled")||u()}).mousedown(function(){f.not("."+p+"-state-active").not("."+p+"-state-disabled").addClass(p+"-state-down")}).mouseup(function(){f.removeClass(p+"-state-down")}).hover(function(){f.not("."+p+"-state-active").not("."+p+"-state-disabled").addClass(p+"-state-hover")},function(){f.removeClass(p+"-state-hover").removeClass(p+"-state-down")}).appendTo(i),s||f.addClass(p+"-corner-left"),s=f)}}}),s&&s.addClass(p+"-corner-right")}),i}function o(e){h.find("h2").html(e)}function u(e){h.find("span.fc-button-"+e).addClass(p+"-state-active")}function a(e){h.find("span.fc-button-"+e).removeClass(p+"-state-active")}function f(e){h.find("span.fc-button-"+e).addClass(p+"-state-disabled")}function l(e){h.find("span.fc-button-"+e).removeClass(p+"-state-disabled")}var c=this;c.render=r,c.destroy=i,c.updateTitle=o,c.activateButton=u,c.deactivateButton=a,c.disableButton=f,c.enableButton=l;var h=e([]),p}function s(n,r){function i(e,t){return!A||e<A||t>O}function s(e,t){A=e,O=t,P=[],e=++M,_=t=L.length;for(var n=0;n<t;n++)o(L[n],e)}function o(e,t){u(e,function(n){if(t==M){if(n){for(var r=0;r<n.length;r++)n[r].source=e,b(n[r]);P=P.concat(n)}_--,_||C(P)}})}function u(t,r){var i,s=bt.sourceFetchers,o;for(i=0;i<s.length;i++){o=s[i](t,A,O,r);if(o===!0)return;if(typeof o=="object"){u(o,r);return}}if(i=t.events)e.isFunction(i)?(m(),i(h(A),h(O),function(e){r(e),y()})):e.isArray(i)?r(i):r();else if(t.url){var a=t.success,f=t.error,l=t.complete;i=e.extend({},t.data||{}),s=Y(t.startParam,n.startParam),o=Y(t.endParam,n.endParam),s&&(i[s]=Math.round(+A/1e3)),o&&(i[o]=Math.round(+O/1e3)),m(),e.ajax(e.extend({},Et,t,{data:i,success:function(t){t=t||[];var n=G(a,this,arguments);e.isArray(n)&&(t=n),r(t)},error:function(){G(f,this,arguments),r()},complete:function(){G(l,this,arguments),y()}}))}else r()}function a(e){if(e=f(e))_++,o(e,M)}function f(t){e.isFunction(t)||e.isArray(t)?t={events:t}:typeof t=="string"&&(t={url:t});if(typeof t=="object")return w(t),L.push(t),t}function l(t){L=e.grep(L,function(e){return!E(e,t)}),P=e.grep(P,function(e){return!E(e.source,t)}),C(P)}function c(e){var t,n=P.length,r,i=N().defaultEventEnd,s=e.start-e._start,o=e.end?e.end-(e._end||i(e)):0;for(t=0;t<n;t++)r=P[t],r._id==e._id&&r!=e&&(r.start=new Date(+r.start+s),r.end=e.end?r.end?new Date(+r.end+o):new Date(+i(r)+o):null,r.title=e.title,r.url=e.url,r.allDay=e.allDay,r.className=e.className,r.editable=e.editable,r.color=e.color,r.backgroudColor=e.backgroudColor,r.borderColor=e.borderColor,r.textColor=e.textColor,b(r));b(e),C(P)}function p(e,t){b(e),e.source||(t&&(k.events.push(e),e.source=k),P.push(e)),C(P)}function d(t){if(t){if(!e.isFunction(t)){var n=t+"";t=function(e){return e._id==n}}P=e.grep(P,t,!0);for(r=0;r<L.length;r++)e.isArray(L[r].events)&&(L[r].events=e.grep(L[r].events,t,!0))}else{P=[];for(var r=0;r<L.length;r++)e.isArray(L[r].events)&&(L[r].events=[])}C(P)}function v(t){return e.isFunction(t)?e.grep(P,t):t?(t+="",e.grep(P,function(e){return e._id==t})):P}function m(){D++||T("loading",null,!0)}function y(){--D||T("loading",null,!1)}function b(e){var r=e.source||{},i=Y(r.ignoreTimezone,n.ignoreTimezone);e._id=e._id||(e.id===t?"_fc"+St++:e.id+""),e.date&&(e.start||(e.start=e.date),delete e.date),e._start=h(e.start=g(e.start,i)),e.end=g(e.end,i),e.end&&e.end<=e.start&&(e.end=null),e._end=e.end?h(e.end):null,e.allDay===t&&(e.allDay=Y(r.allDayDefault,n.allDayDefault)),e.className?typeof e.className=="string"&&(e.className=e.className.split(/\s+/)):e.className=[]}function w(e){e.className?typeof e.className=="string"&&(e.className=e.className.split(/\s+/)):e.className=[];for(var t=bt.sourceNormalizers,n=0;n<t.length;n++)t[n](e)}function E(e,t){return e&&t&&S(e)==S(t)}function S(e){return(typeof e=="object"?e.events||e.url:"")||e}var x=this;x.isFetchNeeded=i,x.fetchEvents=s,x.addEventSource=a,x.removeEventSource=l,x.updateEvent=c,x.renderEvent=p,x.removeEvents=d,x.clientEvents=v,x.normalizeEvent=b;var T=x.trigger,N=x.getView,C=x.reportEvents,k={events:[]},L=[k],A,O,M=0,_=0,D=0,P=[];for(x=0;x<r.length;x++)f(r[x])}function o(e,t,n){return e.setFullYear(e.getFullYear()+t),n||c(e),e}function u(e,t,n){if(+e){t=e.getMonth()+t;var r=h(e);r.setDate(1),r.setMonth(t),e.setMonth(t);for(n||c(e);e.getMonth()!=r.getMonth();)e.setDate(e.getDate()+(e<r?1:-1))}return e}function a(e,t,n){if(+e){t=e.getDate()+t;var r=h(e);r.setHours(9),r.setDate(t),e.setDate(t),n||c(e),f(e,r)}return e}function f(e,t){if(+e)for(;e.getDate()!=t.getDate();)e.setTime(+e+(e<t?1:-1)*Nt)}function l(e,t){return e.setMinutes(e.getMinutes()+t),e}function c(e){return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}function h(e,t){return t?c(new Date(+e)):new Date(+e)}function p(){var e=0,t;do t=new Date(1970,e++,1);while(t.getHours());return t}function d(e,t,n){for(t=t||1;!e.getDay()||n&&e.getDay()==1||!n&&e.getDay()==6;)a(e,t);return e}function v(e,t){return Math.round((h(e,!0)-h(t,!0))/Tt)}function m(e,n,r,i){n!==t&&n!=e.getFullYear()&&(e.setDate(1),e.setMonth(0),e.setFullYear(n)),r!==t&&r!=e.getMonth()&&(e.setDate(1),e.setMonth(r)),i!==t&&e.setDate(i)}function g(e,n){return typeof e=="object"?e:typeof e=="number"?new Date(e*1e3):typeof e=="string"?e.match(/^\d+(\.\d+)?$/)?new Date(parseFloat(e)*1e3):(n===t&&(n=!0),y(e,n)||(e?new Date(e):null)):null}function y(e,t){e=e.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!e)return null;var n=new Date(e[1],0,1);return t||!e[13]?(t=new Date(e[1],0,1,9,0),e[3]&&(n.setMonth(e[3]-1),t.setMonth(e[3]-1)),e[5]&&(n.setDate(e[5]),t.setDate(e[5])),f(n,t),e[7]&&n.setHours(e[7]),e[8]&&n.setMinutes(e[8]),e[10]&&n.setSeconds(e[10]),e[12]&&n.setMilliseconds(Number("0."+e[12])*1e3),f(n,t)):(n.setUTCFullYear(e[1],e[3]?e[3]-1:0,e[5]||1),n.setUTCHours(e[7]||0,e[8]||0,e[10]||0,e[12]?Number("0."+e[12])*1e3:0),e[14]&&(t=Number(e[16])*60+(e[18]?Number(e[18]):0),t*=e[15]=="-"?1:-1,n=new Date(+n+t*60*1e3))),n}function b(e){if(typeof e=="number")return e*60;if(typeof e=="object")return e.getHours()*60+e.getMinutes();if(e=e.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var t=parseInt(e[1],10);return e[3]&&(t%=12,e[3].toLowerCase().charAt(0)=="p"&&(t+=12)),t*60+(e[2]?parseInt(e[2],10):0)}}function w(e,t,n){return E(e,null,t,n)}function E(e,t,n,r){r=r||gt;var i=e,s=t,o,u=n.length,a,f,l,c="";for(o=0;o<u;o++){a=n.charAt(o);if(a=="'"){for(f=o+1;f<u;f++)if(n.charAt(f)=="'"){i&&(c+=f==o+1?"'":n.substring(o+1,f),o=f);break}}else if(a=="("){for(f=o+1;f<u;f++)if(n.charAt(f)==")"){o=w(i,n.substring(o+1,f),r),parseInt(o.replace(/\D/,""),10)&&(c+=o),o=f;break}}else if(a=="["){for(f=o+1;f<u;f++)if(n.charAt(f)=="]"){a=n.substring(o+1,f),o=w(i,a,r),o!=w(s,a,r)&&(c+=o),o=f;break}}else if(a=="{")i=t,s=e;else if(a=="}")i=e,s=t;else{for(f=u;f>o;f--)if(l=kt[n.substring(o,f)]){i&&(c+=l(i,r)),o=f-1;break}f==o&&i&&(c+=a)}}return c}function S(e){return e.end?x(e.end,e.allDay):a(h(e.start),1)}function x(e,t){return e=h(e),t||e.getHours()||e.getMinutes()?a(e,1):c(e)}function T(e,t){return(t.msLength-e.msLength)*100+(e.event.start-t.event.start)}function N(e,t){return e.end>t.start&&e.start<t.end}function C(e,t,n,r){var i=[],s,o=e.length,u,a,f,l,c;for(s=0;s<o;s++)u=e[s],a=u.start,f=t[s],f>n&&a<r&&(a<n?(a=h(n),l=!1):(a=a,l=!0),f>r?(f=h(r),c=!1):(f=f,c=!0),i.push({event:u,start:a,end:f,isStart:l,isEnd:c,msLength:f-a}));return i.sort(T)}function k(e){var t=[],n,r=e.length,i,s,o,u;for(n=0;n<r;n++){i=e[n];for(s=0;;){o=!1;if(t[s])for(u=0;u<t[s].length;u++)if(N(t[s][u],i)){o=!0;break}if(!o)break;s++}t[s]?t[s].push(i):t[s]=[i]}return t}function L(n,r,i){n.unbind("mouseover").mouseover(function(n){for(var s=n.target,o;s!=this;)o=s,s=s.parentNode;(s=o._fci)!==t&&(o._fci=t,o=r[s],i(o.event,o.element,o),e(n.target).trigger(n)),n.stopPropagation()})}function A(t,n,r){for(var i=0,s;i<t.length;i++)s=e(t[i]),s.width(Math.max(0,n-M(s,r)))}function O(t,n,r){for(var i=0,s;i<t.length;i++)s=e(t[i]),s.height(Math.max(0,n-H(s,r)))}function M(e,t){return _(e)+P(e)+(t?D(e):0)}function _(t){return(parseFloat(e.css(t[0],"paddingLeft",!0))||0)+(parseFloat(e.css(t[0],"paddingRight",!0))||0)}function D(t){return(parseFloat(e.css(t[0],"marginLeft",!0))||0)+(parseFloat(e.css(t[0],"marginRight",!0))||0)}function P(t){return(parseFloat(e.css(t[0],"borderLeftWidth",!0))||0)+(parseFloat(e.css(t[0],"borderRightWidth",!0))||0)}function H(e,t){return B(e)+F(e)+(t?j(e):0)}function B(t){return(parseFloat(e.css(t[0],"paddingTop",!0))||0)+(parseFloat(e.css(t[0],"paddingBottom",!0))||0)}function j(t){return(parseFloat(e.css(t[0],"marginTop",!0))||0)+(parseFloat(e.css(t[0],"marginBottom",!0))||0)}function F(t){return(parseFloat(e.css(t[0],"borderTopWidth",!0))||0)+(parseFloat(e.css(t[0],"borderBottomWidth",!0))||0)}function I(e,t){t=typeof t=="number"?t+"px":t,e.each(function(e,n){n.style.cssText+=";min-height:"+t+";_height:"+t})}function q(){}function R(e,t){return e-t}function U(e){return Math.max.apply(Math,e)}function z(e){return(e<10?"0":"")+e}function W(e,n){if(e[n]!==t)return e[n];n=n.split(/(?=[A-Z])/);for(var r=n.length-1,i;r>=0;r--){i=e[n[r].toLowerCase()];if(i!==t)return i}return e[""]}function X(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function V(e){return e.id+"/"+e.className+"/"+e.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/ig,"")}function $(e){e.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function J(e){e.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function K(e,t){e.each(function(e,n){n.className=n.className.replace(/^fc-\w*/,"fc-"+xt[t.getDay()])})}function Q(e,t){var n=e.source||{},r=e.color,i=n.color,s=t("eventColor"),o=e.backgroundColor||r||n.backgroundColor||i||t("eventBackgroundColor")||s;return r=e.borderColor||r||n.borderColor||i||t("eventBorderColor")||s,e=e.textColor||n.textColor||t("eventTextColor"),t=[],o&&t.push("background-color:"+o),r&&t.push("border-color:"+r),e&&t.push("color:"+e),t.join(";")}function G(t,n,r){e.isFunction(t)&&(t=[t]);if(t){var i,s;for(i=0;i<t.length;i++)s=t[i].apply(n,r)||s;return s}}function Y(){for(var e=0;e<arguments.length;e++)if(arguments[e]!==t)return arguments[e]}function Z(e,t){function n(e,t){t&&(u(e,t),e.setDate(1)),e=h(e,!0),e.setDate(1),t=u(h(e),1);var n=h(e),f=h(t),l=i("firstDay"),c=i("weekends")?0:1;c&&(d(n),d(f,-1,!0)),a(n,-((n.getDay()-Math.max(l,c)+7)%7)),a(f,(7-f.getDay()+Math.max(l,c))%7),l=Math.round((f-n)/(Tt*7)),i("weekMode")=="fixed"&&(a(f,(6-l)*7),l=6),r.title=o(e,i("titleFormat")),r.start=e,r.end=t,r.visStart=n,r.visEnd=f,s(6,l,c?5:7,!0)}var r=this;r.render=n,nt.call(r,e,t,"month");var i=r.opt,s=r.renderBasic,o=t.formatDate}function et(e,t){function n(e,t){t&&a(e,t*7),e=a(h(e),-((e.getDay()-i("firstDay")+7)%7)),t=a(h(e),7);var n=h(e),u=h(t),f=i("weekends");f||(d(n),d(u,-1,!0)),r.title=o(n,a(h(u),-1),i("titleFormat")),r.start=e,r.end=t,r.visStart=n,r.visEnd=u,s(1,1,f?7:5,!1)}var r=this;r.render=n,nt.call(r,e,t,"basicWeek");var i=r.opt,s=r.renderBasic,o=t.formatDates}function tt(e,t){function n(e,t){t&&(a(e,t),i("weekends")||d(e,t<0?-1:1)),r.title=o(e,i("titleFormat")),r.start=r.visStart=h(e,!0),r.end=r.visEnd=a(h(r.start),1),s(1,1,1,!1)}var r=this;r.render=n,nt.call(r,e,t,"basicDay");var i=r.opt,s=r.renderBasic,o=t.formatDate}function nt(t,n,r){function i(e,t,n,r){ot=t,ut=n,s(),(t=!Q)?o(e,r):q(),u(t)}function s(){(gt=j("isRTL"))?(yt=-1,bt=ut-1):(yt=1,bt=0),wt=j("firstDay"),Et=j("weekends")?0:1,St=j("theme")?"ui":"fc",xt=j("columnFormat")}function o(n,r){var i,s=St+"-widget-header",o=St+"-widget-content",u;i="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>";for(u=0;u<ut;u++)i+="<th class='fc- "+s+"'/>";i+="</tr></thead><tbody>";for(u=0;u<n;u++){i+="<tr class='fc-week"+u+"'>";for(s=0;s<ut;s++)i+="<td class='fc- "+o+" fc-day"+(u*ut+s)+"'><div>"+(r?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";i+="</tr>"}i+="</tbody></table>",n=e(i).appendTo(t),X=n.find("thead"),V=X.find("th"),Q=n.find("tbody"),G=Q.find("tr"),Y=Q.find("td"),Z=Y.filter(":first-child"),et=G.eq(0).find("div.fc-day-content div"),J(X.add(X.find("tr"))),J(G),G.eq(0).addClass("fc-first"),p(Y),tt=e("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(t)}function u(t){var n=t||ot==1,r=B.start.getMonth(),i=c(new Date),s,o,u;n&&V.each(function(t,n){s=e(n),o=M(t),s.html(W(o,xt)),K(s,o)}),Y.each(function(t,u){s=e(u),o=M(t),o.getMonth()==r?s.removeClass("fc-other-month"):s.addClass("fc-other-month"),+o==+i?s.addClass(St+"-state-highlight fc-today"):s.removeClass(St+"-state-highlight fc-today"),s.find("div.fc-day-number").text(o.getDate()),n&&K(s,o)}),G.each(function(t,n){u=e(n),t<ot?(u.show(),t==ot-1?u.addClass("fc-last"):u.removeClass("fc-last")):u.hide()})}function f(t){it=t,t=it-X.height();var n,r,i;j("weekMode")=="variable"?n=r=Math.floor(t/(ot==1?2:6)):(n=Math.floor(t/ot),r=t-n*(ot-1)),Z.each(function(t,s){t<ot&&(i=e(s),I(i.find("> div"),(t==ot-1?r:n)-H(i)))})}function l(e){nt=e,vt.clear(),st=Math.floor(nt/ut),A(V.slice(0,-1),st)}function p(e){e.click(d).mousedown(z)}function d(e){if(!j("selectable")){var t=parseInt(this.className.match(/fc\-day(\d+)/)[1]);t=M(t),F("dayClick",this,t,!0,e)}}function m(e,t,n){n&&at.build(),n=h(B.visStart);for(var r=a(h(n),ut),i=0;i<ot;i++){var s=new Date(Math.max(n,e)),o=new Date(Math.min(r,t));if(s<o){var u;gt?(u=v(o,n)*yt+bt+1,s=v(s,n)*yt+bt+1):(u=v(s,n),s=v(o,n)),p(g(i,u,i,s-1))}a(n,7),a(r,7)}}function g(e,n,r,i){return e=at.rect(e,n,r,i,t),R(e,t)}function y(e){return h(e)}function b(e,t){m(e,a(h(t),1),!0)}function w(){U()}function E(e,t,n){var r=k(e);F("dayClick",Y[r.row*ut+r.col],e,t,n)}function S(e,t){lt.start(function(e){U(),e&&g(e.row,e.col,e.row,e.col)},t)}function x(e,t,n){var r=lt.stop();U(),r&&(r=L(r),F("drop",e,r,!0,t,n))}function T(e){return h(e.start)}function N(e){return vt.left(e)}function C(e){return vt.right(e)}function k(e){return{row:Math.floor(v(e,B.visStart)/7),col:_(e.getDay())}}function L(e){return O(e.row,e.col)}function O(e,t){return a(h(B.visStart),e*7+t*yt+bt)}function M(e){return O(Math.floor(e/ut),e%ut)}function _(e){return(e-Math.max(wt,Et)+ut)%ut*yt+bt}function D(e){return G.eq(e)}function P(){return{left:0,right:nt}}var B=this;B.renderBasic=i,B.setHeight=f,B.setWidth=l,B.renderDayOverlay=m,B.defaultSelectionEnd=y,B.renderSelection=b,B.clearSelection=w,B.reportDayClick=E,B.dragStart=S,B.dragStop=x,B.defaultEventEnd=T,B.getHoverListener=function(){return lt},B.colContentLeft=N,B.colContentRight=C,B.dayOfWeekCol=_,B.dateCell=k,B.cellDate=L,B.cellIsAllDay=function(){return!0},B.allDayRow=D,B.allDayBounds=P,B.getRowCnt=function(){return ot},B.getColCnt=function(){return ut},B.getColWidth=function(){return st},B.getDaySegmentContainer=function(){return tt},ft.call(B,t,n,r),ht.call(B),ct.call(B),rt.call(B);var j=B.opt,F=B.trigger,q=B.clearEvents,R=B.renderOverlay,U=B.clearOverlays,z=B.daySelectionMousedown,W=n.formatDate,X,V,Q,G,Y,Z,et,tt,nt,it,st,ot,ut,at,lt,vt,gt,yt,bt,wt,Et,St,xt;$(t.addClass("fc-grid")),at=new pt(function(t,n){var r,i,s;V.each(function(t,o){r=e(o),i=r.offset().left,t&&(s[1]=i),s=[i],n[t]=s}),s[1]=i+r.outerWidth(),G.each(function(n,o){n<ot&&(r=e(o),i=r.offset().top,n&&(s[1]=i),s=[i],t[n]=s)}),s[1]=i+r.outerHeight()}),lt=new dt(at),vt=new mt(function(e){return et.eq(e)})}function rt(){function t(e,t){p(e),L(r(e),t)}function n(){d(),b().empty()}function r(t){var n=T(),r=N(),i=h(o.visStart);r=a(h(i),r);var s=e.map(t,S),u,f,l,c,p,d,v=[];for(u=0;u<n;u++){f=k(C(t,s,i,r));for(l=0;l<f.length;l++){c=f[l];for(p=0;p<c.length;p++)d=c[p],d.row=u,d.level=l,v.push(d)}a(i,7),a(r,7)}return v}function i(e,t,n){l(e)&&s(e,t),n.isEnd&&c(e)&&A(e,t,n),v(e,t)}function s(e,t){var n=w(),r;t.draggable({zIndex:9,delay:50,opacity:u("dragOpacity"),revertDuration:u("dragRevertDuration"),start:function(i,s){f("eventDragStart",t,e,i,s),g(e,t),n.start(function(n,i,s,o){t.draggable("option","revert",!n||!s&&!o),x(),n?(r=s*7+o*(u("isRTL")?-1:1),E(a(h(e.start),r),a(S(e),r))):r=0},i,"drag")},stop:function(i,s){n.stop(),x(),f("eventDragStop",t,e,i,s),r?y(this,e,r,0,e.allDay,i,s):(t.css("filter",""),m(e,t))}})}var o=this;o.renderEvents=t,o.compileDaySegs=r,o.clearEvents=n,o.bindDaySeg=i,lt.call(o);var u=o.opt,f=o.trigger,l=o.isEventDraggable,c=o.isEventResizable,p=o.reportEvents,d=o.reportEventClear,v=o.eventElementHandlers,m=o.showEvents,g=o.hideEvents,y=o.eventDrop,b=o.getDaySegmentContainer,w=o.getHoverListener,E=o.renderDayOverlay,x=o.clearOverlays,T=o.getRowCnt,N=o.getColCnt,L=o.renderDaySegs,A=o.resizableDayEvent}function it(e,t){function n(e,t){t&&a(e,t*7),e=a(h(e),-((e.getDay()-i("firstDay")+7)%7)),t=a(h(e),7);var n=h(e),u=h(t),f=i("weekends");f||(d(n),d(u,-1,!0)),r.title=o(n,a(h(u),-1),i("titleFormat")),r.start=e,r.end=t,r.visStart=n,r.visEnd=u,s(f?7:5)}var r=this;r.render=n,ot.call(r,e,t,"agendaWeek");var i=r.opt,s=r.renderAgenda,o=t.formatDates}function st(e,t){function n(e,t){t&&(a(e,t),i("weekends")||d(e,t<0?-1:1)),t=h(e,!0);var n=a(h(t),1);r.title=o(e,i("titleFormat")),r.start=r.visStart=t,r.end=r.visEnd=n,s(1)}var r=this;r.render=n,ot.call(r,e,t,"agendaDay");var i=r.opt,s=r.renderAgenda,o=t.formatDate}function ot(n,r,i){function s(e){Wt=e,o(),gt?nt():u(),f()}function o(){Qt=et("theme")?"ui":"fc",Yt=et("weekends")?0:1,Gt=et("firstDay"),(Zt=et("isRTL"))?(en=-1,tn=Wt-1):(en=1,tn=0),nn=b(et("minTime")),rn=b(et("maxTime")),sn=et("columnFormat")}function u(){var t=Qt+"-widget-header",r=Qt+"-widget-content",i,s,o,u,a,f=et("slotMinutes")%15==0;i="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr><th class='fc-agenda-axis "+t+"'>&nbsp;</th>";for(s=0;s<Wt;s++)i+="<th class='fc- fc-col"+s+" "+t+"'/>";i+="<th class='fc-agenda-gutter "+t+"'>&nbsp;</th></tr></thead><tbody><tr><th class='fc-agenda-axis "+t+"'>&nbsp;</th>";for(s=0;s<Wt;s++)i+="<td class='fc- fc-col"+s+" "+r+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";i+="<td class='fc-agenda-gutter "+r+"'>&nbsp;</td></tr></tbody></table>",gt=e(i).appendTo(n),yt=gt.find("thead"),bt=yt.find("th").slice(1,-1),wt=gt.find("tbody"),Et=wt.find("td").slice(0,-1),St=Et.find("div.fc-day-content div"),xt=Et.eq(0),Tt=xt.find("> div"),J(yt.add(yt.find("tr"))),J(wt.add(wt.find("tr"))),Pt=yt.find("th:first"),Ht=gt.find(".fc-agenda-gutter"),Nt=e("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),et("allDaySlot")?(Ct=e("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(Nt),i="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+t+" fc-agenda-axis'>"+et("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+t+" fc-agenda-gutter'>&nbsp;</th></tr></table>",kt=e(i).appendTo(Nt),Lt=kt.find("tr"),E(Lt.find("td")),Pt=Pt.add(kt.find("th:first")),Ht=Ht.add(kt.find("th.fc-agenda-gutter")),Nt.append("<div class='fc-agenda-divider "+t+"'><div class='fc-agenda-divider-inner'/></div>")):Ct=e([]),At=e("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(Nt),Ot=e("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(At),Mt=e("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(Ot),i="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",o=p(),u=l(h(o),rn),l(o,nn);for(s=Xt=0;o<u;s++)a=o.getMinutes(),i+="<tr class='fc-slot"+s+" "+(a?"fc-minor":"")+"'><th class='fc-agenda-axis "+t+"'>"+(!f||!a?vt(o,et("axisFormat")):"&nbsp;")+"</th><td class='"+r+"'><div style='position:relative'>&nbsp;</div></td></tr>",l(o,et("slotMinutes")),Xt++;i+="</tbody></table>",_t=e(i).appendTo(Ot),Dt=_t.find("div:first"),S(_t.find("td")),Pt=Pt.add(_t.find("th:first"))}function f(){var e,t,n,r,i=c(new Date);for(e=0;e<Wt;e++)r=D(e),t=bt.eq(e),t.html(vt(r,sn)),n=Et.eq(e),+r==+i?n.addClass(Qt+"-state-highlight fc-today"):n.removeClass(Qt+"-state-highlight fc-today"),K(t.add(n),r)}function d(e,n){e===t&&(e=Ft),Ft=e,Kt={};var r=wt.position().top,i=At.position().top;e=Math.min(e-r,_t.height()+i+1),Tt.height(e-H(xt)),Nt.css("top",r),At.height(e-i-1),Ut=Dt.height()+1,n&&g()}function m(t){jt=t,Jt.clear(),It=0,A(Pt.width("").each(function(t,n){It=Math.max(It,e(n).outerWidth())}),It),t=At[0].clientWidth,(Rt=At.width()-t)?(A(Ht,Rt),Ht.show().prev().removeClass("fc-last")):Ht.hide().prev().addClass("fc-last"),qt=Math.floor((t-It)/Wt),A(bt.slice(0,-1),qt)}function g(){function e(){At.scrollTop(r)}var t=p(),n=h(t);n.setHours(et("firstHour"));var r=j(t,n)+1;e(),setTimeout(e,0)}function y(){zt=At.scrollTop()}function w(){At.scrollTop(zt)}function E(e){e.click(x).mousedown(at)}function S(e){e.click(x).mousedown(V)}function x(e){if(!et("selectable")){var t=Math.min(Wt-1,Math.floor((e.pageX-gt.offset().left-It)/qt)),n=D(t),r=this.parentNode.className.match(/fc-slot(\d+)/);if(r){r=parseInt(r[1])*et("slotMinutes");var i=Math.floor(r/60);n.setHours(i),n.setMinutes(r%60+nn),tt("dayClick",Et[t],n,!1,e)}else tt("dayClick",Et[t],n,!0,e)}}function T(e,t,n){n&&Vt.build();var r=h(Z.visStart);Zt?(n=v(t,r)*en+tn+1,e=v(e,r)*en+tn+1):(n=v(e,r),e=v(t,r)),n=Math.max(0,n),e=Math.min(Wt,e),n<e&&E(N(0,n,0,e-1))}function N(e,t,n,r){return e=Vt.rect(e,t,n,r,Nt),rt(e,Nt)}function C(e,t){for(var n=h(Z.visStart),r=a(h(n),1),i=0;i<Wt;i++){var s=new Date(Math.max(n,e)),o=new Date(Math.min(r,t));if(s<o){var u=i*en+tn;u=Vt.rect(0,u,0,u,Ot),s=j(n,s),o=j(n,o),u.top=s,u.height=o-s,S(rt(u,Ot))}a(n,1),a(r,1)}}function k(e){return Jt.left(e)}function L(e){return Jt.right(e)}function M(e){return{row:Math.floor(v(e,Z.visStart)/7),col:B(e.getDay())}}function _(e){var t=D(e.col);return e=e.row,et("allDaySlot")&&e--,e>=0&&l(t,nn+e*et("slotMinutes")),t}function D(e){return a(h(Z.visStart),e*en+tn)}function P(e){return et("allDaySlot")&&!e.row}function B(e){return(e-Math.max(Gt,Yt)+Wt)%Wt*en+tn}function j(e,n){e=h(e,!0);if(n<l(h(e),nn))return 0;if(n>=l(h(e),rn))return _t.height();e=et("slotMinutes"),n=n.getHours()*60+n.getMinutes()-nn;var r=Math.floor(n/e),i=Kt[r];return i===t&&(i=Kt[r]=_t.find("tr:eq("+r+") td div")[0].offsetTop),Math.max(0,Math.round(i-1+Ut*(n%e/e)))}function F(){return{left:It,right:jt-Rt}}function I(){return Lt}function q(e){var t=h(e.start);return e.allDay?t:l(t,et("defaultEventMinutes"))}function U(e,t){return t?h(e):l(h(e),et("slotMinutes"))}function z(e,t,n){n?et("allDaySlot")&&T(e,a(h(t),1),!0):W(e,t)}function W(t,n){var r=et("selectHelper");Vt.build();if(r){var i=v(t,Z.visStart)*en+tn;if(i>=0&&i<Wt){i=Vt.rect(0,i,0,i,Ot);var s=j(t,t),o=j(t,n);if(o>s){i.top=s,i.height=o-s,i.left+=2,i.width-=5;if(e.isFunction(r)){if(t=r(t,n))i.position="absolute",i.zIndex=8,Bt=e(t).css(i).appendTo(Ot)}else i.isStart=!0,i.isEnd=!0,Bt=e(lt({title:"",start:t,end:n,className:["fc-select-helper"],editable:!1},i)),Bt.css("opacity",et("dragOpacity"));Bt&&(S(Bt),Ot.append(Bt),A(Bt,i.width,!0),O(Bt,i.height,!0))}}}else C(t,n)}function X(){it(),Bt&&(Bt.remove(),Bt=null)}function V(t){if(t.which==1&&et("selectable")){ot(t);var n;$t.start(function(e,t){X(),e&&e.col==t.col&&!P(e)?(t=_(t),e=_(e),n=[t,l(h(t),et("slotMinutes")),e,l(h(e),et("slotMinutes"))].sort(R),W(n[0],n[3])):n=null},t),e(document).one("mouseup",function(e){$t.stop(),n&&(+n[0]==+n[1]&&Q(n[0],!1,e),st(n[0],n[3],!1,e))})}}function Q(e,t,n){tt("dayClick",Et[B(e.getDay())],e,t,n)}function G(e,t){$t.start(function(e){it();if(e)if(P(e))N(e.row,e.col,e.row,e.col);else{e=_(e);var t=l(h(e),et("defaultEventMinutes"));C(e,t)}},t)}function Y(e,t,n){var r=$t.stop();it(),r&&tt("drop",e,_(r),P(r),t,n)}var Z=this;Z.renderAgenda=s,Z.setWidth=m,Z.setHeight=d,Z.beforeHide=y,Z.afterShow=w,Z.defaultEventEnd=q,Z.timePosition=j,Z.dayOfWeekCol=B,Z.dateCell=M,Z.cellDate=_,Z.cellIsAllDay=P,Z.allDayRow=I,Z.allDayBounds=F,Z.getHoverListener=function(){return $t},Z.colContentLeft=k,Z.colContentRight=L,Z.getDaySegmentContainer=function(){return Ct},Z.getSlotSegmentContainer=function(){return Mt},Z.getMinMinute=function(){return nn},Z.getMaxMinute=function(){return rn},Z.getBodyContent=function(){return Ot},Z.getRowCnt=function(){return 1},Z.getColCnt=function(){return Wt},Z.getColWidth=function(){return qt},Z.getSlotHeight=function(){return Ut},Z.defaultSelectionEnd=U,Z.renderDayOverlay=T,Z.renderSelection=z,Z.clearSelection=X,Z.reportDayClick=Q,Z.dragStart=G,Z.dragStop=Y,ft.call(Z,n,r,i),ht.call(Z),ct.call(Z),ut.call(Z);var et=Z.opt,tt=Z.trigger,nt=Z.clearEvents,rt=Z.renderOverlay,it=Z.clearOverlays,st=Z.reportSelection,ot=Z.unselect,at=Z.daySelectionMousedown,lt=Z.slotSegHtml,vt=r.formatDate,gt,yt,bt,wt,Et,St,xt,Tt,Nt,Ct,kt,Lt,At,Ot,Mt,_t,Dt,Pt,Ht,Bt,jt,Ft,It,qt,Rt,Ut,zt,Wt,Xt,Vt,$t,Jt,Kt={},Qt,Gt,Yt,Zt,en,tn,nn,rn,sn;$(n.addClass("fc-agenda")),Vt=new pt(function(t,n){function r(e){return Math.max(a,Math.min(f,e))}var i,s,o;bt.each(function(t,r){i=e(r),s=i.offset().left,t&&(o[1]=s),o=[s],n[t]=o}),o[1]=s+i.outerWidth(),et("allDaySlot")&&(i=Lt,s=i.offset().top,t[0]=[s,s+i.outerHeight()]);for(var u=Ot.offset().top,a=At.offset().top,f=a+At.outerHeight(),l=0;l<Xt;l++)t.push([r(u+Ut*l),r(u+Ut*(l+1))])}),$t=new dt(Vt),Jt=new mt(function(e){return St.eq(e)})}function ut(){function n(e,t){T(e);var n,r=e.length,o=[],a=[];for(n=0;n<r;n++)e[n].allDay?o.push(e[n]):a.push(e[n]);y("allDaySlot")&&(U(i(o),t),_()),u(s(a),t)}function r(){N(),D().empty(),P().empty()}function i(t){t=k(C(t,e.map(t,S),g.visStart,g.visEnd));var n,r=t.length,i,s,o,u=[];for(n=0;n<r;n++){i=t[n];for(s=0;s<i.length;s++)o=i[s],o.row=0,o.level=n,u.push(o)}return u}function s(t){var n=W(),r=F(),i=j(),s=l(h(g.visStart),r),u=e.map(t,o),f,c,p,d,v,m,y=[];for(f=0;f<n;f++){c=k(C(t,u,s,l(h(s),i-r))),at(c);for(p=0;p<c.length;p++){d=c[p];for(v=0;v<d.length;v++)m=d[v],m.col=f,m.level=p,y.push(m)}a(s,1,!0)}return y}function o(e){return e.end?h(e.end):l(h(e.start),y("defaultEventMinutes"))}function u(n,r){var i,s=n.length,o,u,a,l,c,h,d,v,m,g="",w,E,S={},x={},T=P(),N;i=W(),(w=y("isRTL"))?(E=-1,N=i-1):(E=1,N=0);for(i=0;i<s;i++)o=n[i],u=o.event,a=I(o.start,o.start),l=I(o.start,o.end),c=o.col,h=o.level,d=o.forward||0,v=q(c*E+N),m=R(c*E+N)-v,m=Math.min(m-6,m*.95),c=h?m/(h+d+1):d?(m/(d+1)-6)*2:m,h=v+m/(h+d+1)*h*E+(w?m-c:0),o.top=a,o.left=h,o.outerWidth=c,o.outerHeight=l-a,g+=f(u,o);T[0].innerHTML=g,w=T.children();for(i=0;i<s;i++)o=n[i],u=o.event,g=e(w[i]),E=b("eventRender",u,u,g),E===!1?g.remove():(E&&E!==!0&&(g.remove(),g=e(E).css({position:"absolute",top:o.top,left:o.left}).appendTo(T)),o.element=g,u._id===r?p(u,g,o):g[0]._fci=i,G(u,g));L(T,n,p);for(i=0;i<s;i++){o=n[i];if(g=o.element)u=S[r=o.key=V(g[0])],o.vsides=u===t?S[r]=H(g,!0):u,u=x[r],o.hsides=u===t?x[r]=M(g,!0):u,r=g.find("div.fc-event-content"),r.length&&(o.contentTop=r[0].offsetTop)}for(i=0;i<s;i++){o=n[i];if(g=o.element)g[0].style.width=Math.max(0,o.outerWidth-o.hsides)+"px",S=Math.max(0,o.outerHeight-o.vsides),g[0].style.height=S+"px",u=o.event,o.contentTop!==t&&S-o.contentTop<10&&(g.find("div.fc-event-time").text(st(u.start,y("timeFormat"))+" - "+u.title),g.find("div.fc-event-title").remove()),b("eventAfterRender",u,u,g)}}function f(e,t){var n="<",r=e.url,i=Q(e,y),s=i?" style='"+i+"'":"",o=["fc-event","fc-event-skin","fc-event-vert"];return w(e)&&o.push("fc-event-draggable"),t.isStart&&o.push("fc-corner-top"),t.isEnd&&o.push("fc-corner-bottom"),o=o.concat(e.className),e.source&&(o=o.concat(e.source.className||[])),n+=r?"a href='"+X(e.url)+"'":"div",n+=" class='"+o.join(" ")+"' style='position:absolute;z-index:8;top:"+t.top+"px;left:"+t.left+"px;"+i+"'><div class='fc-event-inner fc-event-skin'"+s+"><div class='fc-event-head fc-event-skin'"+s+"><div class='fc-event-time'>"+X(ot(e.start,e.end,y("timeFormat")))+"</div></div><div class='fc-event-content'><div class='fc-event-title'>"+X(e.title)+"</div></div><div class='fc-event-bg'></div></div>",t.isEnd&&E(e)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"
),n+="</"+(r?"a":"div")+">",n}function c(e,t,n){w(e)&&d(e,t,n.isStart),n.isEnd&&E(e)&&z(e,t,n),A(e,t)}function p(e,t,n){var r=t.find("div.fc-event-time");w(e)&&v(e,t,r),n.isEnd&&E(e)&&m(e,t,r),A(e,t)}function d(e,t,n){function r(){o||(t.width(i).height("").draggable("option","grid",null),o=!0)}var i,s,o=!0,u,f=y("isRTL")?-1:1,l=B(),c=$(),p=J(),d=F();t.draggable({zIndex:9,opacity:y("dragOpacity","month"),revertDuration:y("dragRevertDuration"),start:function(d,v){b("eventDragStart",t,e,d,v),Z(e,t),i=t.width(),l.start(function(i,l,d,v){rt(),i?(s=!1,u=v*f,i.row?n?o&&(t.width(c-10),O(t,p*Math.round((e.end?(e.end-e.start)/Ct:y("defaultEventMinutes"))/y("slotMinutes"))),t.draggable("option","grid",[c,1]),o=!1):s=!0:(nt(a(h(e.start),u),a(S(e),u)),r()),s=s||o&&!u):(r(),s=!0),t.draggable("option","revert",s)},d,"drag")},stop:function(n,i){l.stop(),rt(),b("eventDragStop",t,e,n,i);if(s)r(),t.css("filter",""),Y(e,t);else{var a=0;o||(a=Math.round((t.offset().top-K().offset().top)/p)*y("slotMinutes")+d-(e.start.getHours()*60+e.start.getMinutes())),et(this,e,u,a,o,n,i)}}})}function v(e,t,n){function r(t){var r=l(h(e.start),t),i;e.end&&(i=l(h(e.end),t)),n.text(ot(r,i,y("timeFormat")))}function i(){o&&(n.css("display",""),t.draggable("option","grid",[m,g]),o=!1)}var s,o=!1,u,f,c,p=y("isRTL")?-1:1,d=B(),v=W(),m=$(),g=J();t.draggable({zIndex:9,scroll:!1,grid:[m,g],axis:v==1?"y":!1,opacity:y("dragOpacity"),revertDuration:y("dragRevertDuration"),start:function(r,l){b("eventDragStart",t,e,r,l),Z(e,t),s=t.position(),f=c=0,d.start(function(r,s,f,l){t.draggable("option","revert",!r),rt(),r&&(u=l*p,y("allDaySlot")&&!r.row?(o||(o=!0,n.hide(),t.draggable("option","grid",null)),nt(a(h(e.start),u),a(S(e),u))):i())},r,"drag")},drag:function(e,t){f=Math.round((t.position.top-s.top)/g)*y("slotMinutes"),f!=c&&(o||r(f),c=f)},stop:function(n,a){var l=d.stop();rt(),b("eventDragStop",t,e,n,a),l&&(u||f||o)?et(this,e,u,o?0:f,o,n,a):(i(),t.css("filter",""),t.css(s),r(0),Y(e,t))}})}function m(e,t,n){var r,i,s=J();t.resizable({handles:{s:"div.ui-resizable-s"},grid:s,start:function(n,s){r=i=0,Z(e,t),t.css("z-index",9),b("eventResizeStart",this,e,n,s)},resize:function(o,u){r=Math.round((Math.max(s,t.height())-u.originalSize.height)/s),r!=i&&(n.text(ot(e.start,!r&&!e.end?null:l(x(e),y("slotMinutes")*r),y("timeFormat"))),i=r)},stop:function(n,i){b("eventResizeStop",this,e,n,i),r?tt(this,e,0,y("slotMinutes")*r,n,i):(t.css("z-index",8),Y(e,t))}})}var g=this;g.renderEvents=n,g.compileDaySegs=i,g.clearEvents=r,g.slotSegHtml=f,g.bindDaySeg=c,lt.call(g);var y=g.opt,b=g.trigger,w=g.isEventDraggable,E=g.isEventResizable,x=g.eventEnd,T=g.reportEvents,N=g.reportEventClear,A=g.eventElementHandlers,_=g.setHeight,D=g.getDaySegmentContainer,P=g.getSlotSegmentContainer,B=g.getHoverListener,j=g.getMaxMinute,F=g.getMinMinute,I=g.timePosition,q=g.colContentLeft,R=g.colContentRight,U=g.renderDaySegs,z=g.resizableDayEvent,W=g.getColCnt,$=g.getColWidth,J=g.getSlotHeight,K=g.getBodyContent,G=g.reportEventElement,Y=g.showEvents,Z=g.hideEvents,et=g.eventDrop,tt=g.eventResize,nt=g.renderDayOverlay,rt=g.clearOverlays,it=g.calendar,st=it.formatDate,ot=it.formatDates}function at(e){var t,n,r,i,s,o;for(t=e.length-1;t>0;t--){i=e[t];for(n=0;n<i.length;n++){s=i[n];for(r=0;r<e[t-1].length;r++)o=e[t-1][r],N(s,o)&&(o.forward=Math.max(o.forward||0,(s.forward||0)+1))}}}function ft(e,n,r){function i(e,t){return e=M[e],typeof e=="object"?W(e,t||r):e}function s(e,t){return n.trigger.apply(n,[e,t||T].concat(Array.prototype.slice.call(arguments,2),[T]))}function o(e){return f(e)&&!i("disableDragging")}function u(e){return f(e)&&!i("disableResizing")}function f(e){return Y(e.editable,(e.source||{}).editable,i("editable"))}function c(e){L={};var t,n=e.length,r;for(t=0;t<n;t++)r=e[t],L[r._id]?L[r._id].push(r):L[r._id]=[r]}function p(e){return e.end?h(e.end):N(e)}function d(e,t){A.push(t),O[e._id]?O[e._id].push(t):O[e._id]=[t]}function v(){A=[],O={}}function m(e,t){t.click(function(n){if(!t.hasClass("ui-draggable-dragging")&&!t.hasClass("ui-resizable-resizing"))return s("eventClick",this,e,n)}).hover(function(t){s("eventMouseover",this,e,t)},function(t){s("eventMouseout",this,e,t)})}function g(e,t){b(e,t,"show")}function y(e,t){b(e,t,"hide")}function b(e,t,n){e=O[e._id];var r,i=e.length;for(r=0;r<i;r++)(!t||e[r][0]!=t[0])&&e[r][n]()}function w(e,t,n,r,i,o,u){var a=t.allDay,f=t._id;S(L[f],n,r,i),s("eventDrop",e,t,n,r,i,function(){S(L[f],-n,-r,a),k(f)},o,u),k(f)}function E(e,t,n,r,i,o){var u=t._id;x(L[u],n,r),s("eventResize",e,t,n,r,function(){x(L[u],-n,-r),k(u)},i,o),k(u)}function S(e,n,r,i){r=r||0;for(var s,o=e.length,u=0;u<o;u++)s=e[u],i!==t&&(s.allDay=i),l(a(s.start,n,!0),r),s.end&&(s.end=l(a(s.end,n,!0),r)),C(s,M)}function x(e,t,n){n=n||0;for(var r,i=e.length,s=0;s<i;s++)r=e[s],r.end=l(a(p(r),t,!0),n),C(r,M)}var T=this;T.element=e,T.calendar=n,T.name=r,T.opt=i,T.trigger=s,T.isEventDraggable=o,T.isEventResizable=u,T.reportEvents=c,T.eventEnd=p,T.reportEventElement=d,T.reportEventClear=v,T.eventElementHandlers=m,T.showEvents=g,T.hideEvents=y,T.eventDrop=w,T.eventResize=E;var N=T.defaultEventEnd,C=n.normalizeEvent,k=n.reportEventChange,L={},A=[],O={},M=n.options}function lt(){function n(e,t){var n=I(),r=k(),a=A(),h=0,m,g,y=e.length,b,w;n[0].innerHTML=i(e),s(e,n.children()),o(e),u(e,n,t),f(e),l(e),c(e),t=p();for(n=0;n<r;n++){m=[];for(g=0;g<a;g++)m[g]=0;for(;h<y&&(b=e[h]).row==n;){g=U(m.slice(b.startCol,b.endCol)),b.top=g,g+=b.outerHeight;for(w=b.startCol;w<b.endCol;w++)m[w]=g;h++}t[n].height(U(m))}v(e,d(t))}function r(t,n,r){var o=e("<div/>"),u=I(),a=t.length,h;o[0].innerHTML=i(t),o=o.children(),u.append(o),s(t,o),f(t),l(t),c(t),v(t,d(p())),o=[];for(u=0;u<a;u++)if(h=t[u].element)t[u].row===n&&h.css("top",r),o.push(h[0]);return e(o)}function i(e){var t=y("isRTL"),n,r=e.length,i,s,o,u;n=_();var a=n.left,f=n.right,l,c,h,p,d,v="";for(n=0;n<r;n++)i=e[n],s=i.event,u=["fc-event","fc-event-skin","fc-event-hori"],w(s)&&u.push("fc-event-draggable"),t?(i.isStart&&u.push("fc-corner-right"),i.isEnd&&u.push("fc-corner-left"),l=H(i.end.getDay()-1),c=H(i.start.getDay()),h=i.isEnd?D(l):a,p=i.isStart?P(c):f):(i.isStart&&u.push("fc-corner-left"),i.isEnd&&u.push("fc-corner-right"),l=H(i.start.getDay()),c=H(i.end.getDay()-1),h=i.isStart?D(l):a,p=i.isEnd?P(c):f),u=u.concat(s.className),s.source&&(u=u.concat(s.source.className||[])),o=s.url,d=Q(s,y),v+=o?"<a href='"+X(o)+"'":"<div",v+=" class='"+u.join(" ")+"' style='position:absolute;z-index:8;left:"+h+"px;"+d+"'><div class='fc-event-inner fc-event-skin'"+(d?" style='"+d+"'":"")+">",!s.allDay&&i.isStart&&(v+="<span class='fc-event-time'>"+X(R(s.start,s.end,y("timeFormat")))+"</span>"),v+="<span class='fc-event-title'>"+X(s.title)+"</span></div>",i.isEnd&&E(s)&&(v+="<div class='ui-resizable-handle ui-resizable-"+(t?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),v+="</"+(o?"a":"div")+">",i.left=h,i.outerWidth=p-h,i.startCol=l,i.endCol=c+1;return v}function s(t,n){var r,i=t.length,s,o,u;for(r=0;r<i;r++)s=t[r],o=s.event,u=e(n[r]),o=b("eventRender",o,o,u),o===!1?u.remove():(o&&o!==!0&&(o=e(o).css({position:"absolute",left:s.left}),u.replaceWith(o),u=o),s.element=u)}function o(e){var t,n=e.length,r,i;for(t=0;t<n;t++)r=e[t],(i=r.element)&&x(r.event,i)}function u(e,t,n){var r,i=e.length,s,o,u;for(r=0;r<i;r++){s=e[r];if(o=s.element)u=s.event,u._id===n?q(u,o,s):o[0]._fci=r}L(t,e,q)}function f(e){var n,r=e.length,i,s,o,u,a={};for(n=0;n<r;n++){i=e[n];if(s=i.element)o=i.key=V(s[0]),u=a[o],u===t&&(u=a[o]=M(s,!0)),i.hsides=u}}function l(e){var t,n=e.length,r,i;for(t=0;t<n;t++){r=e[t];if(i=r.element)i[0].style.width=Math.max(0,r.outerWidth-r.hsides)+"px"}}function c(e){var n,r=e.length,i,s,o,u,a={};for(n=0;n<r;n++){i=e[n];if(s=i.element)o=i.key,u=a[o],u===t&&(u=a[o]=j(s)),i.outerHeight=s[0].offsetHeight+u}}function p(){var e,t=k(),n=[];for(e=0;e<t;e++)n[e]=O(e).find("td:first div.fc-day-content > div");return n}function d(e){var t,n=e.length,r=[];for(t=0;t<n;t++)r[t]=e[t][0].offsetTop;return r}function v(e,t){var n,r=e.length,i,s;for(n=0;n<r;n++){i=e[n];if(s=i.element)s[0].style.top=t[i.row]+(i.top||0)+"px",i=i.event,b("eventAfterRender",i,i,s)}}function m(t,n,i){var s=y("isRTL"),o=s?"w":"e",u=n.find("div.ui-resizable-"+o),f=!1;$(n),n.mousedown(function(e){e.preventDefault()}).click(function(e){f&&(e.preventDefault(),e.stopImmediatePropagation())}),u.mousedown(function(u){function l(n){b("eventResizeStop",this,t,n),e("body").css("cursor",""),c.stop(),W(),w&&C(this,t,w,0,n),setTimeout(function(){f=!1},0)}if(u.which==1){f=!0;var c=g.getHoverListener(),p=k(),d=A(),v=s?-1:1,m=s?d-1:0,y=n.css("top"),w,E,x=e.extend({},t),L=B(t.start);J(),e("body").css("cursor",o+"-resize").one("mouseup",l),b("eventResizeStart",this,t,u),c.start(function(e,n){if(e){var u=Math.max(L.row,e.row);e=e.col,p==1&&(u=0),u==L.row&&(e=s?Math.min(L.col,e):Math.max(L.col,e)),w=u*7+e*v+m-(n.row*7+n.col*v+m),n=a(S(t),w,!0),w?(x.end=n,u=E,E=r(F([x]),i.row,y),E.find("*").css("cursor",o+"-resize"),u&&u.remove(),N(t)):E&&(T(t),E.remove(),E=null),W(),z(t.start,a(h(n),1))}},u)}})}var g=this;g.renderDaySegs=n,g.resizableDayEvent=m;var y=g.opt,b=g.trigger,w=g.isEventDraggable,E=g.isEventResizable,S=g.eventEnd,x=g.reportEventElement,T=g.showEvents,N=g.hideEvents,C=g.eventResize,k=g.getRowCnt,A=g.getColCnt,O=g.allDayRow,_=g.allDayBounds,D=g.colContentLeft,P=g.colContentRight,H=g.dayOfWeekCol,B=g.dateCell,F=g.compileDaySegs,I=g.getDaySegmentContainer,q=g.bindDaySeg,R=g.calendar.formatDates,z=g.renderDayOverlay,W=g.clearOverlays,J=g.clearSelection}function ct(){function t(e,t,i){n(),t||(t=a(e,i)),f(e,t,i),r(e,t,i)}function n(e){c&&(c=!1,l(),u("unselect",null,e))}function r(e,t,n,r){c=!0,u("select",null,e,t,n,r)}function i(t){var i=s.cellDate,u=s.cellIsAllDay,a=s.getHoverListener(),c=s.reportDayClick;if(t.which==1&&o("selectable")){n(t);var h;a.start(function(e,t){l(),e&&u(e)?(h=[i(t),i(e)].sort(R),f(h[0],h[1],!0)):h=null},t),e(document).one("mouseup",function(e){a.stop(),h&&(+h[0]==+h[1]&&c(h[0],!0,e),r(h[0],h[1],!0,e))})}}var s=this;s.select=t,s.unselect=n,s.reportSelection=r,s.daySelectionMousedown=i;var o=s.opt,u=s.trigger,a=s.defaultSelectionEnd,f=s.renderSelection,l=s.clearSelection,c=!1;o("selectable")&&o("unselectAuto")&&e(document).mousedown(function(t){var r=o("unselectCancel");if(r&&e(t.target).parents(r).length)return;n(t)})}function ht(){function t(t,n){var r=s.shift();return r||(r=e("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),r[0].parentNode!=n[0]&&r.appendTo(n),i.push(r.css(t).show()),r}function n(){for(var e;e=i.shift();)s.push(e.hide().unbind())}var r=this;r.renderOverlay=t,r.clearOverlays=n;var i=[],s=[]}function pt(e){var t=this,n,r;t.build=function(){n=[],r=[],e(n,r)},t.cell=function(e,t){var i=n.length,s=r.length,o,u=-1,a=-1;for(o=0;o<i;o++)if(t>=n[o][0]&&t<n[o][1]){u=o;break}for(o=0;o<s;o++)if(e>=r[o][0]&&e<r[o][1]){a=o;break}return u>=0&&a>=0?{row:u,col:a}:null},t.rect=function(e,t,i,s,o){return o=o.offset(),{top:n[e][0]-o.top,left:r[t][0]-o.left,width:r[s][1]-r[t][0],height:n[i][1]-n[e][0]}}}function dt(t){function n(e){vt(e),e=t.cell(e.pageX,e.pageY);if(!e!=!u||e&&(e.row!=u.row||e.col!=u.col))e?(o||(o=e),s(e,o,e.row-o.row,e.col-o.col)):s(e,o),u=e}var r=this,i,s,o,u;r.start=function(r,a,f){s=r,o=u=null,t.build(),n(a),i=f||"mousemove",e(document).bind(i,n)},r.stop=function(){return e(document).unbind(i,n),u}}function vt(e){e.pageX===t&&(e.pageX=e.originalEvent.pageX,e.pageY=e.originalEvent.pageY)}function mt(e){function n(t){return i[t]=i[t]||e(t)}var r=this,i={},s={},o={};r.left=function(e){return s[e]=s[e]===t?n(e).position().left:s[e]},r.right=function(e){return o[e]=o[e]===t?r.left(e)+n(e).width():o[e]},r.clear=function(){i={},s={},o={}}}var gt={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*"},yt={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},bt=e.fullCalendar={version:"1.5.4"},wt=bt.views={};e.fn.fullCalendar=function(n){if(typeof n=="string"){var i=Array.prototype.slice.call(arguments,1),s;return this.each(function(){var r=e.data(this,"fullCalendar");r&&e.isFunction(r[n])&&(r=r[n].apply(r,i),s===t&&(s=r),n=="destroy"&&e.removeData(this,"fullCalendar"))}),s!==t?s:this}var o=n.eventSources||[];return delete n.eventSources,n.events&&(o.push(n.events),delete n.events),n=e.extend(!0,{},gt,n.isRTL||n.isRTL===t&&gt.isRTL?yt:{},n),this.each(function(t,i){t=e(i),i=new r(t,n,o),t.data("fullCalendar",i),i.render()}),this},bt.sourceNormalizers=[],bt.sourceFetchers=[];var Et={dataType:"json",cache:!1},St=1;bt.addDays=a,bt.cloneDate=h,bt.parseDate=g,bt.parseISO8601=y,bt.parseTime=b,bt.formatDate=w,bt.formatDates=E;var xt=["sun","mon","tue","wed","thu","fri","sat"],Tt=864e5,Nt=36e5,Ct=6e4,kt={s:function(e){return e.getSeconds()},ss:function(e){return z(e.getSeconds())},m:function(e){return e.getMinutes()},mm:function(e){return z(e.getMinutes())},h:function(e){return e.getHours()%12||12},hh:function(e){return z(e.getHours()%12||12)},H:function(e){return e.getHours()},HH:function(e){return z(e.getHours())},d:function(e){return e.getDate()},dd:function(e){return z(e.getDate())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return e.getMonth()+1},MM:function(e){return z(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},yy:function(e){return(e.getFullYear()+"").substring(2)},yyyy:function(e){return e.getFullYear()},t:function(e){return e.getHours()<12?"a":"p"},tt:function(e){return e.getHours()<12?"am":"pm"},T:function(e){return e.getHours()<12?"A":"P"},TT:function(e){return e.getHours()<12?"AM":"PM"},u:function(e){return w(e,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(e){return e=e.getDate(),e>10&&e<20?"th":["st","nd","rd"][e%10-1]||"th"}};bt.applyAll=G,wt.month=Z,wt.basicWeek=et,wt.basicDay=tt,n({weekMode:"fixed"}),wt.agendaWeek=it,wt.agendaDay=st,n({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24})})(jQuery);