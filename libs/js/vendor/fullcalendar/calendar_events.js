(function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};this.CalendarEvent=function(){function t(t,n){var r;this.container=t,this.makeFullCalendarEventObject=e(this.makeFullCalendarEventObject,this),this.handleDoubleClick=e(this.handleDoubleClick,this),this.finalizeEvent=e(this.finalizeEvent,this),this.handleInputBlur=e(this.handleInputBlur,this),this.handleInputKeyup=e(this.handleInputKeyup,this),this.container.bind("dblclick",this.handleDoubleClick),n!=null?(r=this.container.find("input"),r.focus(),r.bind("keyup",this.handleInputKeyup),r.bind("blur",this.handleInputBlur)):this.makeFullCalendarEventObject()}return t.prototype.handleInputKeyup=function(e){var t;t=$(e.target);if(e.keyCode===13)return t.val().length===0?this.container.remove():this.finalizeEvent(t.val())},t.prototype.handleInputBlur=function(e){var t;return t=$(e.target),t.val().length===0?this.container.remove():this.finalizeEvent(t.val())},t.prototype.finalizeEvent=function(e){return this.container.find("a").html(e),this.makeFullCalendarEventObject()},t.prototype.handleDoubleClick=function(e){var t,n,r,i=this;return t=$("<input type='text'>"),n=$(e.target),r=n.text(),t.val(r),n.html(t),t.focus(),t.bind("keyup",function(e){if(e.keyCode===13)return t.val().length>0?(n.html(t.val()),i.makeFullCalendarEventObject()):n.html(r)}),t.bind("blur",function(e){return t.val().length>0?(n.html(t.val()),i.makeFullCalendarEventObject()):n.html(r)})},t.prototype.makeFullCalendarEventObject=function(){var e,t;return t=$(this.container),e={title:$.trim(t.text())},t.data("eventObject",e),t.draggable({zIndex:999,revert:!0,revertDuration:0})},t}(),this.CalendarEvents=function(){function t(t){this.container=t,this.handleAddLink=e(this.handleAddLink,this),this.addLink=this.container.find("#add-event"),this.container.find("a.external-event").each(function(){return new CalendarEvent($(this))}),this.template="<li><a class='external-event'><input type='text'></a></li>",this.addLink.bind("click",this.handleAddLink)}return t.prototype.handleAddLink=function(){var e;return e=$(this.template),e.insertBefore(this.addLink.parent()),new CalendarEvent(e,!0)},t}()}).call(this);